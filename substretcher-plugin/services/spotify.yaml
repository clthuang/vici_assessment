id: spotify
name: Spotify
domain: spotify.com
billingUrl: https://www.spotify.com/account/subscription/

navigation:
  steps:
    - description: "Click account dropdown"
      selector: "[data-testid='user-widget-link']"
    - description: "Click Account"
      selector: "a[href*='/account']"
      waitAfter: 2000

extraction:
  status:
    selector: "[data-testid='subscription-status']"
  renewalDate:
    selector: "[data-testid='next-billing-date']"
  cost:
    selector: "[data-testid='plan-price']"

cancellation:
  enabled: true
  steps:
    - action: click
      description: "Click Change plan"
      selector: "button[data-testid='change-plan-button']"
      waitAfter: 1500
    - action: click
      description: "Click Cancel Premium"
      selector: "button[data-testid='cancel-subscription']"
      requiresConfirmation: true
    - action: click
      description: "Confirm cancellation"
      selector: "button[data-testid='confirm-cancel']"
  successIndicator:
    text: "Your subscription has been cancelled"
